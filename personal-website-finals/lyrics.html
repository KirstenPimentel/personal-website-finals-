<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lyrics Posts</title>

  <link rel="stylesheet" href="css/style.css" />
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>

  <div class="header">Lyrics Posts</div>

  <nav>
    <a href="index.html">Home</a>
    <a href="gallery.html">1975 Concert Gallery</a>
    <a href="apcrams.html">APC RAMS</a>
    <a href="lyrics.html">Lyrics (‚ù§Ô∏è)</a>
    <a href="resources.html">Resources</a>
    <button id="themeToggle">üåô Dark</button>
  </nav>

  <section id="lyricsApp" class="main" style="margin:20px;">
    <h2 class="center">Tap the heart to like a lyric</h2>

    <!-- Post-a-lyric form -->
    <div class="card" style="margin-bottom:16px;">
      <h3 style="margin-top:0;">Post a lyric</h3>
      <input v-model="newTitle" placeholder="Title (e.g., Heart Out)" />
      <textarea v-model="newExcerpt" placeholder="Excerpt (optional)"></textarea>
      <button @click="createPost" :disabled="creating">
        <span v-if="!creating">‚ûï Add</span>
        <span v-else>‚è≥ Adding‚Ä¶</span>
      </button>
    </div>

    <!-- List -->
    <div v-if="loading">Loading posts‚Ä¶</div>

    <div v-else>
      <div v-for="post in posts" :key="post.id" class="card" style="margin-bottom:16px;">
        <h3 style="margin-top:0;">{{ post.title }}</h3>
        <p v-if="post.excerpt" style="color: var(--muted-text); margin-top: 6px;">
          {{ post.excerpt }}
        </p>

        <button @click="like(post)" :disabled="post.liking" aria-label="Like this post">
          <span v-if="!post.liking">‚ù§Ô∏è</span>
          <span v-else>‚è≥</span>
          <span style="margin-left:8px;">{{ post.likes }}</span>
        </button>
      </div>
    </div>
  </section>

  <div class="footer">
    <a href="index.html">Back to Home</a>
  </div>

  <!-- ORDER MATTERS -->
  <script src="js/supabase.js"></script>
  <script src="js/lyrics.js"></script>
  <script src="js/theme.js"></script>
</body>
</html>